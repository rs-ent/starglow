//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id String [pk]
  name String
  email String [unique]
  emailVerified DateTime
  image String
  role String [not null, default: 'user']
  active Boolean [not null, default: true]
  createdAt DateTime [default: `now()`, not null]
  lastLoginAt DateTime
  accounts Account [not null]
  loginAttempts LoginAttemptLog [not null]
  payments Payment [not null]
  player Player
  sessions Session [not null]
  wallets Wallet [not null]
  provider String
}

Table Account {
  id String [pk]
  userId String [not null]
  type String [not null]
  provider String [not null]
  providerAccountId String [not null]
  refresh_token String
  access_token String
  expires_at Int
  token_type String
  scope String
  id_token String
  session_state String
  user User [not null]

  indexes {
    (provider, providerAccountId) [unique]
  }
}

Table Session {
  id String [pk]
  sessionToken String [unique, not null]
  userId String [not null]
  expires DateTime [not null]
  user User [not null]
}

Table Wallet {
  id String [pk]
  userId String [not null]
  address String [unique, not null]
  privateKey String
  network String [not null]
  createdAt DateTime [default: `now()`, not null]
  default Boolean [not null, default: false]
  primary Int [default: 0]
  lastAccessedAt DateTime [not null]
  nickname String
  status WalletStatus [not null, default: 'ACTIVE']
  keyHash String
  nonce String
  payments Payment [not null]
  user User [not null]
}

Table Player {
  id String [pk]
  userId String [unique]
  telegramId String [unique]
  name String
  referralCount Int [not null, default: 0]
  referredBy String
  referrer Player
  referredPlayers Player [not null]
  referredMethod String
  referredAt DateTime [default: `now()`, not null]
  createdAt DateTime [default: `now()`, not null]
  lastConnectedAt DateTime [not null]
  user User
  playerAssets PlayerAsset [not null]
  pollLogs PollLog [not null]
  questLogs QuestLog [not null]
  rewardLogs RewardsLog [not null]
  referredPlayerLogs ReferralLog [not null]
  referrerPlayerLogs ReferralLog [not null]
  referralCode String [unique, not null]

  indexes {
    (userId, telegramId) [unique]
  }
}

Table ReferralLog {
  id String [pk]
  referredPlayerId String [not null]
  referredPlayer Player [not null]
  referrerPlayerId String [not null]
  referrerPlayer Player [not null]
  method String
  createdAt DateTime [default: `now()`, not null]

  indexes {
    (referredPlayerId, referrerPlayerId) [unique]
  }
}

Table PlayerAsset {
  id String [pk]
  playerId String [not null]
  assetId String [not null]
  balance Int [not null, default: 0]
  player Player [not null]
  asset Asset [not null]
  status PlayerAssetStatus [not null, default: 'ACTIVE']
  updatedAt DateTime [not null]

  indexes {
    (playerId, assetId) [unique]
  }
}

Table Quest {
  id String [pk]
  title String [not null]
  questType QuestType [not null, default: 'URL']
  description String
  url String
  icon String
  imgUrl String
  youtubeUrl String
  rewardAssetId String
  rewardAmount Int
  rewardAsset Asset
  startDate DateTime
  endDate DateTime
  needToken Boolean [not null, default: false]
  needTokenAddress String
  repeatable Boolean [not null, default: false]
  repeatableCount Int
  repeatableInterval Int
  isReferral Boolean [not null, default: false]
  referralCount Int
  permanent Boolean [not null, default: false]
  isActive Boolean [not null, default: true]
  order Int [default: 0]
  effects String
  type String
  questLogs QuestLog [not null]
  rewardLogs RewardsLog [not null]
  artistId String
  artist Artist
}

Table QuestLog {
  id String [pk]
  playerId String [not null]
  questId String [not null]
  completed Boolean [not null, default: false]
  completedAt DateTime
  rewardAssetId String
  rewardAmount Int
  rewardAsset Asset
  repeatCount Int [not null, default: 1]
  completedDates DateTime[] [not null]
  deprecated Boolean [not null, default: false]
  createdAt DateTime [default: `now()`, not null]
  isClaimed Boolean [not null, default: false]
  claimedAt DateTime
  player Player [not null]
  quest Quest [not null]
  rewardLogs RewardsLog [not null]

  indexes {
    (playerId, questId) [unique]
  }
}

Table Poll {
  id String [pk]
  title String [not null]
  titleShorten String
  description String
  category PollCategory [not null, default: 'PUBLIC']
  status PollStatus [not null, default: 'UPCOMING']
  options Json[] [not null]
  optionsOrder String[] [not null]
  imgUrl String
  youtubeUrl String
  startDate DateTime [default: `now()`, not null]
  endDate DateTime [not null]
  exposeInScheduleTab Boolean [not null, default: true]
  hideResults Boolean [not null, default: false]
  resultVisibleDate DateTime
  prePromoText String
  prePromoImg String
  postPromoText String
  postPromoImg String
  needToken Boolean [not null, default: true]
  needTokenAddress String
  minimumPoints Int
  minimumSGP Int
  minimumSGT Int
  requiredQuests String[] [not null]
  allowMultipleVote Boolean [not null, default: false]
  voteLimit Int
  bettingMode Boolean [not null, default: false]
  bettingAssetId String
  bettingAsset Asset
  minimumBet Int [not null, default: 1000]
  maximumBet Int [not null, default: 10000]
  participationRewardAssetId String
  participationRewardAmount Int
  participationRewardAsset Asset
  viewCount Int [not null, default: 0]
  uniqueVoters Int [not null, default: 0]
  totalVotes Int [not null, default: 0]
  totalBetsAmount Int [not null, default: 0]
  customResults Int[] [not null]
  verificationHash String
  verifiedAt DateTime
  verifiedBy String
  tags String[] [not null]
  metadata Json
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  artistId String
  artist Artist
  pollLogs PollLog [not null]
  rewardLogs RewardsLog [not null]
}

Table PollLog {
  id String [pk]
  playerId String [not null]
  pollId String [not null]
  optionId String [not null]
  option Json [not null]
  amount Int [not null, default: 1]
  betAmount Int [not null, default: 0]
  ipAddress String
  userAgent String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  rewardAssetId String
  rewardAmount Int
  rewardAsset Asset
  record Json
  player Player [not null]
  poll Poll [not null]
  rewardLogs RewardsLog [not null]

  indexes {
    (playerId, pollId, optionId) [unique]
  }
}

Table RewardsLog {
  id String [pk]
  playerId String [not null]
  assetId String
  balanceBefore Int
  balanceAfter Int
  questId String
  questLogId String
  pollId String
  pollLogId String
  amount Int [not null]
  reason String
  createdAt DateTime [default: `now()`, not null]
  player Player [not null]
  asset Asset
  poll Poll
  pollLog PollLog
  quest Quest
  questLog QuestLog
}

Table Events {
  id String [pk]
  category EventCategory [not null, default: 'other']
  title String [not null]
  description String
  content Json
  url String
  status EventStatus [not null, default: 'upcoming']
  bannerImg String
  bannerImg2 String
  galleryImgs String[] [not null]
  detailImg Json
  saleStartDate DateTime
  saleEndDate DateTime
  price Int
  capacity Int
  ageLimit Int
  organizer String
  organizerImg String
  organizerUrl String
  contact String
  startDate DateTime [not null]
  endDate DateTime [not null]
  location String
  locationAddress String
  locationImg String
  locationUrl String
  locationLat Float
  locationLng Float
  artist String
  artistImg String
  artistUrl String
  tags String[] [not null]
  hashtags String[] [not null]
  promotionText String
  promotionImg String
  isFeatured Boolean [not null, default: false]
  viewCount Int [not null, default: 0]
  bookmarkCount Int [not null, default: 0]
  isActive Boolean [not null, default: true]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table StoredFiles {
  id String [pk]
  name String
  url String [unique, not null]
  type String
  sourceUrl String
  alt String
  width Int
  height Int
  mimeType String
  sizeBytes Int
  metadata Json
  order Int [default: 0]
  purpose String
  bucket String [not null]
  expiresAt DateTime
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]

  indexes {
    (sourceUrl, type) [unique]
  }
}

Table LoginAttemptLog {
  id String [pk]
  userId String
  email String
  provider String
  success Boolean [not null]
  error String
  ipAddress String
  userAgent String
  timestamp DateTime [default: `now()`, not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  user User
}

Table Payment {
  id String [pk]
  userId String
  productTable String [not null]
  productId String [not null]
  productName String [not null]
  productDefaultCurrency String [not null]
  amount Int [not null]
  quantity Int [not null]
  currency String [not null]
  payMethod String [not null]
  easyPayProvider String
  cardProvider String
  cardInstallmentMonths Int
  cardInterestFree Boolean
  cardApproveNumber String
  cardNumber String
  status PaymentStatus [not null, default: 'PENDING']
  statusReason String
  paidAt DateTime
  cancelledAt DateTime
  failedAt DateTime
  pgResponse Json
  metadata Json
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  channelKey String [not null]
  storeId String [not null]
  promotionCode String
  isPromotionApplied Boolean [not null, default: false]
  convertedPrice Int
  exchangeRate Float
  exchangeRateProvider String
  exchangeRateTimestamp DateTime
  originalProductPrice Int
  refundedAt DateTime
  cancelAmount Int
  redirectUrl String
  code String
  message String
  paymentId String
  pgCode String
  pgMessage String
  transactionType String
  txId String
  postProcessResult Json
  postProcessResultAt DateTime
  receiverWalletAddress String
  needWallet Boolean [not null, default: false]
  completedAt DateTime
  promotion PaymentPromotion
  receiverWallet Wallet
  user User
  virtualAccount VirtualAccount
  webhookEvents WebhookEvent [not null]
}

Table PaymentPromotion {
  id String [pk]
  code String [unique, not null]
  startDate DateTime [not null]
  endDate DateTime [not null]
  discountType PaymentPromotionDiscountType [not null, default: 'percentage']
  discountValue Int [not null]
  isActive Boolean [not null, default: true]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  payments Payment [not null]
}

Table WebhookEvent {
  id String [pk]
  paymentId String
  payload Json
  createdAt DateTime [default: `now()`, not null]
  description String
  payment Payment
}

Table VirtualAccount {
  id String [pk]
  paymentId String [unique, not null]
  bankCode String [not null]
  accountNumber String [not null]
  holderName String [not null]
  expiresAt DateTime [not null]
  depositedAt DateTime
  depositorName String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  payment Payment [not null]
}

Table ExchangeRate {
  id String [pk]
  fromCurrency String [not null]
  toCurrency String [not null]
  rate Float [not null]
  provider String [not null]
  createdAt DateTime [default: `now()`, not null]
}

Table BlockchainNetwork {
  id String [pk]
  name String [unique, not null]
  chainId Int [unique, not null]
  rpcUrl String [not null]
  explorerUrl String [not null]
  symbol String [not null]
  isTestnet Boolean [not null, default: true]
  isActive Boolean [not null, default: true]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  multicallAddress String
  collectionContracts CollectionContract [not null]
  factoryContracts FactoryContract [not null]
  nfts NFT [not null]
  assets Asset [not null]
  assetsContracts AssetsContract [not null]
}

Table AssetsContract {
  id String [pk]
  address String [unique, not null]
  version String [not null]
  description String
  abi Json
  bytecode String
  networkId String [not null]
  network BlockchainNetwork [not null]
  assets Asset [not null]
  creatorAddress String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table Asset {
  id String [pk]
  name String [not null]
  symbol String [not null]
  description String
  iconUrl String
  imageUrl String
  metadata Json
  assetType AssetType [not null]
  contractAddress String
  isActive Boolean [not null, default: true]
  selectors String[] [not null]
  abis Json
  creatorAddress String
  assetId String
  assetsContractAddress String
  assetsContract AssetsContract
  networkId String
  network BlockchainNetwork
  playerAssets PlayerAsset [not null]
  rewardsLogs RewardsLog [not null]
  pollBettingAssets Poll [not null]
  pollParticipationRewardAssets Poll [not null]
  questRewardAssets Quest [not null]
  pollLogRewardAssets PollLog [not null]
  questLogRewardAssets QuestLog [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
}

Table AssetTransaction {
  id String [pk]
  success Boolean [not null]
  assetId String [not null]
  description String
  metadata Json
  amount Int
  receiverAddress String
  transactionHash String [unique, not null]
  createdAt DateTime [default: `now()`, not null]
}

Table FactoryContract {
  id String [pk]
  address String [not null]
  networkId String [not null]
  deployedAt DateTime [default: `now()`, not null]
  deployedBy String
  transactionHash String
  isActive Boolean [not null, default: true]
  collections String[] [not null]
  abi Json
  bytecode String
  collectionContracts CollectionContract [not null]
  network BlockchainNetwork [not null]

  indexes {
    (address, networkId) [unique]
  }
}

Table EscrowWallet {
  id String [pk]
  address String [unique, not null]
  privateKey String [not null]
  keyHash String [not null]
  networkIds String[] [not null]
  isActive Boolean [not null, default: true]
  balance Json
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  nonce String [not null]
}

Table IpfsGroup {
  id String [pk]
  pinataId String [unique, not null]
  name String [unique, not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  files IpfsFile [not null]
}

Table IpfsFile {
  id String [pk]
  type String [not null, default: 'nft-metadata']
  pinataId String [not null]
  name String [not null]
  cid String [not null]
  size Int [not null]
  numberOfFiles Int [not null]
  mimeType String [not null]
  groupId String
  keyvalues Json
  vectorized Boolean [not null, default: false]
  network String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  gateway String [not null, default: 'ipfs://']
  url String [not null, default: 'ipfs://']
  group IpfsGroup
}

Table Metadata {
  id String [pk]
  metadata Json [not null]
  url String [not null, default: 'ipfs://']
  collectionAddress String [unique]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  type MetadataType [not null, default: 'collection']
  tokenId Int
  collectionKey String [not null]
  collectionContract CollectionContract

  indexes {
    (collectionAddress, tokenId) [unique]
  }
}

Table CollectionContract {
  id String [pk]
  address String [unique, not null]
  name String [not null]
  symbol String [not null]
  maxSupply Int [not null]
  mintPrice String [not null]
  baseURI String [not null]
  contractURI String [not null]
  factoryId String [not null]
  networkId String [not null]
  createdBy String [not null, default: 'admin']
  creatorAddress String [not null, default: '0x58E1F072A8f41e1d476F06d73a6cB7b866e6f63B']
  txHash String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  price Int [not null, default: 0]
  circulation Int [not null, default: 1000]
  mintedCount Int [not null, default: 0]
  artistId String
  key String [unique, not null]
  isListed Boolean [not null, default: false]
  abi Json
  bytecode String
  isPaused Boolean [not null, default: false]
  pauseAt DateTime
  unpauseAt DateTime
  artist Artist
  factory FactoryContract [not null]
  network BlockchainNetwork [not null]
  metadata Metadata
  nfts NFT [not null]
  events NFTEvent [not null]
}

Table NFT {
  id String [pk]
  tokenId Int [not null]
  collectionId String [not null]
  ownerAddress String [not null]
  metadataUri String
  mintedAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transactionHash String [not null]
  networkId String [not null]
  name String
  description String
  imageUrl String
  attributes Json
  isListed Boolean [not null, default: false]
  listingPrice String
  lastTransferredAt DateTime
  transferCount Int [not null, default: 0]
  isBurned Boolean [not null, default: false]
  rarity Float
  tags String[] [not null]
  category String
  creatorInfo String
  externalUrl String
  mintPrice String
  mintedBy String
  royaltyInfo Json
  currentOwnerAddress String
  isLocked Boolean [not null, default: false]
  lockedAt DateTime
  unlockAt DateTime
  unlockScheduledAt DateTime
  lockTransactionHash String
  isStaked Boolean [not null, default: false]
  stakedAt DateTime
  unstakeScheduledAt DateTime
  unstakedAt DateTime
  collection CollectionContract [not null]
  network BlockchainNetwork [not null]
  events NFTEvent [not null]

  indexes {
    (collectionId, tokenId) [unique]
  }
}

Table NFTEvent {
  id String [pk]
  nftId String [not null]
  collectionId String [not null]
  eventType String [not null]
  fromAddress String
  toAddress String
  price String
  transactionHash String [not null]
  timestamp DateTime [default: `now()`, not null]
  blockNumber Int
  collection CollectionContract [not null]
  nft NFT [not null]
}

Table Artist {
  id String [pk]
  name String [not null]
  description String
  logoUrl String
  imageUrl String
  externalUrl String
  reportUrl String
  company String
  sns String[] [not null]
  gallery String[] [not null]
  videos String[] [not null]
  music String[] [not null]
  events String[] [not null]
  additionalInfo Json
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  members ArtistMember [not null]
  collectionContracts CollectionContract [not null]
  messages ArtistMessage [not null]
  polls Poll [not null]
  quests Quest [not null]
}

Table ArtistMember {
  id String [pk]
  artistId String [not null]
  name String [not null]
  role String [not null]
  imageUrl String
  externalUrl String
  description String
  realName String
  birthDate DateTime
  birthPlace String
  nationality String
  height Int
  weight Int
  bloodType String
  constellation String
  sns String[] [not null]
  gallery String[] [not null]
  videos String[] [not null]
  music String[] [not null]
  additionalInfo Json
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  artist Artist [not null]
}

Table ArtistMessage {
  id String [pk]
  artistId String [not null]
  bannerUrl String
  externalUrl String
  isActive Boolean [not null, default: true]
  startDate DateTime
  endDate DateTime
  message String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  artist Artist [not null]
}

Enum PlayerAssetStatus {
  ACTIVE
  INACTIVE
  DELETED
  FROZEN
}

Enum QuestType {
  URL
  REFERRAL
}

Enum PollStatus {
  UPCOMING
  ACTIVE
  ENDED
  CANCELLED
  CALCULATING_RESULTS
}

Enum PollCategory {
  PUBLIC
  PRIVATE
}

Enum AssetType {
  ONCHAIN
  OFFCHAIN
}

Enum PaymentStatus {
  PENDING
  AWAITING_DEPOSIT
  PAID
  CANCELLED
  FAILED
  EXPIRED
  PARTIALLY_CANCELLED
  REFUNDED
  COMPLETED
}

Enum PaymentPromotionDiscountType {
  percentage
  amount
}

Enum RewardCurrency {
  points
  SGP
  SGT
}

Enum EventCategory {
  concert
  fanmeeting
  fancamp
  festival
  exhibition
  other
}

Enum EventStatus {
  upcoming
  ongoing
  completed
  cancelled
}

Enum WalletStatus {
  ACTIVE
  INACTIVE
  LOCKED
}

Enum MetadataType {
  collection
  nft
}

Ref: Account.userId > User.id [delete: Cascade]

Ref: Session.userId > User.id [delete: Cascade]

Ref: Wallet.userId > User.id [delete: Cascade]

Ref: Player.referredBy - Player.id

Ref: Player.userId - User.id [delete: Cascade]

Ref: ReferralLog.referredPlayerId > Player.id [delete: Cascade]

Ref: ReferralLog.referrerPlayerId > Player.id [delete: Cascade]

Ref: PlayerAsset.playerId > Player.id [delete: Cascade]

Ref: PlayerAsset.assetId > Asset.id [delete: Cascade]

Ref: Quest.rewardAssetId > Asset.id

Ref: Quest.artistId > Artist.id

Ref: QuestLog.rewardAssetId > Asset.id

Ref: QuestLog.playerId > Player.id [delete: Cascade]

Ref: QuestLog.questId > Quest.id

Ref: Poll.bettingAssetId > Asset.id

Ref: Poll.participationRewardAssetId > Asset.id

Ref: Poll.artistId > Artist.id

Ref: PollLog.rewardAssetId > Asset.id

Ref: PollLog.playerId > Player.id [delete: Cascade]

Ref: PollLog.pollId > Poll.id

Ref: RewardsLog.playerId > Player.id [delete: Cascade]

Ref: RewardsLog.assetId > Asset.id

Ref: RewardsLog.pollId > Poll.id

Ref: RewardsLog.pollLogId > PollLog.id

Ref: RewardsLog.questId > Quest.id

Ref: RewardsLog.questLogId > QuestLog.id

Ref: LoginAttemptLog.userId > User.id [delete: Cascade]

Ref: Payment.promotionCode > PaymentPromotion.code

Ref: Payment.receiverWalletAddress > Wallet.address

Ref: Payment.userId > User.id

Ref: WebhookEvent.paymentId > Payment.id [delete: Cascade]

Ref: VirtualAccount.paymentId - Payment.id [delete: Cascade]

Ref: AssetsContract.networkId > BlockchainNetwork.id

Ref: Asset.assetsContractAddress > AssetsContract.address

Ref: Asset.networkId > BlockchainNetwork.id

Ref: FactoryContract.networkId > BlockchainNetwork.id

Ref: IpfsFile.groupId > IpfsGroup.pinataId

Ref: Metadata.collectionAddress - CollectionContract.address

Ref: CollectionContract.artistId > Artist.id

Ref: CollectionContract.factoryId > FactoryContract.id

Ref: CollectionContract.networkId > BlockchainNetwork.id

Ref: NFT.collectionId > CollectionContract.id

Ref: NFT.networkId > BlockchainNetwork.id

Ref: NFTEvent.collectionId > CollectionContract.id

Ref: NFTEvent.nftId > NFT.id

Ref: ArtistMember.artistId > Artist.id

Ref: ArtistMessage.artistId > Artist.id